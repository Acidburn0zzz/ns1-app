{"version":3,"sources":["../../src/config/config.js"],"names":[],"mappings":";;;;;;;;;;;;;AAAO;;;;;;;;;;;;;;;;;;;;;4BAED;AACJ,iBADI,aACJ,CAAY,MAAZ,EAAoB,SAApB,EAA+B,UAA/B,EAA2C;gCADvC,eACuC;;AACzC,eAAK,UAAL,GAAkB,UAAlB,CADyC;AAEzC,eAAK,QAAL,CAAc,cAAd,GAA+B;AAC7B,uBAAW,EAAX;AACA,wBAAY,EAAZ;WAFF,CAFyC;AAMzC,eAAK,KAAL,GAAa,KAAb,CANyC;AAOzC,eAAK,WAAL,CAAiB,iBAAjB,CAAmC,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAnC,EAPyC;SAA3C;;qBADI;;uCAWS;;;AACZ,gBAAI,OAAO,IAAP,CADQ;AAEX,gBAAI,CAAC,KAAK,QAAL,CAAc,OAAd,EAAuB;AAC1B,qBAAO,QAAQ,OAAR,EAAP,CAD0B;aAA5B;;AAFW,mBAMJ,KAAK,UAAL,CAAgB,GAAhB,CAAoB,wDAApB,EACN,IADM,CACD,UAAC,IAAD,EAAU;AACd,qBAAO,WAAW,KAAK,UAAL,CAAX,CAA4B,IAA5B,CAAiC,YAAK;AAC3C,uBAAO,MAAK,WAAL,CAAiB,gBAAjB,EAAP,CAD2C;eAAL,CAAxC,CADc;aAAV,EAIH,YAAM;AACP,sBAAQ,GAAR,CAAY,0BAAZ,EADO;AAER,mBAAK,KAAL,GAAa,kDAAb,CAFQ;aAAN,CALH,CANW;;;;qCAiBF,YAAY;AACrB,gBAAI,OAAO,IAAP,CADiB;;;;eA5BnB;;;AAkCN,oBAAc,QAAd,GAAyB,cAAzB;;4BAGE","file":"config.js","sourcesContent":["import configTemplate from './config.html!text';\n\nclass Ns1ConfigCtrl {\n  constructor($scope, $injector, backendSrv) {\n    this.backendSrv = backendSrv;\n    this.appModel.secureJsonData = {\n      ns1_token: '',\n      gnet_token: ''\n    };\n    this.error = false;\n    this.appEditCtrl.setPostUpdateHook(this.postUpdate.bind(this));\n  }\n\n  postUpdate() {\n  \tvar self = this;\n    if (!this.appModel.enabled) {\n      return Promise.resolve();\n    }\n    // make sure our Api key works.\n    return this.backendSrv.get(\"api/plugin-proxy/raintank-ns1-app/api/account/settings\")\n    .then((resp) => {\n      return ensureTask(resp.customerid).then(()=> {\n        return this.appEditCtrl.importDashboards(); \n      });\n    }, () => {\n      console.log(\"failed to query NS1 API.\");\n    \tself.error = \"Unable to query NS1 API. please re-enter API Key\";\n    })\n  }\n\n  ensureTask(customerid) {\n    var self = this;\n    \n  }\n}\n\nNs1ConfigCtrl.template = configTemplate;\n\nexport {\n  Ns1ConfigCtrl as ConfigCtrl\n};\n\n"]}